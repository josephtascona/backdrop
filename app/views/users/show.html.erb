<h1>Your Profile</h1>

<% if !@user.avatar_file_name.nil? %>
  <p><%= image_tag @user.avatar.url(:medium), class: "avatar" %></p>
<% else %>
  <img class="avatar1" src="<%= asset_path("anonymous.jpg") %>" />
<% end %>

<% if !@user.first_name.empty? || !@user.last_name.empty? %>
  <p>
    Name: <%= full_name %>
  </p>
<% else %>
  <p>
    Anonymous
  </p>
<% end %>

<p>
  Email: <%= @user.email %>
</p>

<% if !@user.city.to_s.empty? && !@user.state.to_s.empty? %>
  <p>
    Location: <%= location %>
  </p>
<% elsif !@user.city.to_s.empty? %>
  <p>
    City: <%= @user.city %>
  </p>
<% elsif !@user.state.to_s.empty? %>
  <p>
    Province/State: <%= @user.state %>
  </p>
<% else %>
  <p>
    Not from this world!
  </p>
<% end %>

<% if @user.id == current_user.id %>
  <%= link_to "Settings", edit_user_registration_path %>
<% end %>

<% @user.images.order("id DESC").each do |image| %>
  <%= link_to (image_tag image.image.url(:medium), class: "image"), image %>
  <%= link_to like_image_path(image), method: :get, class: "data" do %>
    <i class="fa fa-thumbs-o-up"><%= pluralize(image.get_upvotes.size, "Like") %></i>
  <% end %>
  <%= link_to dislike_image_path(image), method: :get, class: "data" do %>
    <i class="fa fa-thumbs-o-down"><%= pluralize(image.get_downvotes.size, "Dislike") %></i>
  <% end %>
  <% if !image.user.avatar_file_name.nil? %>
    <%= link_to image.user do %>
      <p><%= image_tag image.user.avatar.url(:small), class: "avatar" %></p>
    <% end %>
  <% else %>
    <%= link_to image.user do %>
      <img class="avatar2" src="<%= asset_path("anonymous.jpg") %>" />
    <% end %>
  <% end %>
  <% if !image.user.first_name.empty? || !image.user.last_name.empty? %>
    <p><%= link_to full_name, image.user %></p>
  <% else %>
    <p><%= link_to "Anonymous Author", image.user %></p>
  <% end %>
  <p>Posted <%= time_ago_in_words(image.created_at) %> ago</p>
<% end %>
